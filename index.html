<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>da Linda | Luxury Hair Salon</title>
    
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#1a1a1a">
    <meta name="description" content="da Linda - Modern Luxury Hair Salon">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=Playfair+Display:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        :root { --color-gold: #D4AF37; --color-dark: #1a1a1a; --color-cream: #f9f9f7; }
        body { font-family: 'Lato', sans-serif; background-color: var(--color-cream); color: var(--color-dark); }
        h1, h2, h3, h4, h5, h6 { font-family: 'Playfair Display', serif; }
        html { scroll-behavior: smooth; }
        .admin-input { background: rgba(255, 255, 255, 0.9); border: 1px dashed var(--color-gold); padding: 2px 5px; border-radius: 4px; width: 100%; color: black; }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
        .animate-fade-in { animation: fadeIn 0.3s ease-out forwards; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- CONFIGURATION ---
        const CLOUD_CONFIG = {
            BIN_ID: "6957232d43b1c97be9136a94", // <--- ⚠️ REPLACE THIS WITH YOUR BIN ID
            API_URL: "https://api.jsonbin.io/v3/b"
        };

        // --- ICONS ---
        const Icons = {
            Phone: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></svg>,
            Message: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>,
            Menu: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></svg>,
            X: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>,
            Cloud: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M17.5 19c0-3.037-2.463-5.5-5.5-5.5S6.5 15.963 6.5 19"/><path d="M12 13.5V5"/><path d="m8 9 4-4 4 4"/></svg>
        };

        // --- DEFAULTS ---
        const DEFAULT_SERVICES = [
            { name: "Women's Haircut", price: "$85+", desc: "Includes wash, scalp massage, and blowout." },
            { name: "Men's Haircut", price: "$55+", desc: "Precision cutting and styling." },
            { name: "Full Balayage", price: "$220+", desc: "Hand-painted highlights for a natural gradient." },
            { name: "Root Touch-Up", price: "$95+", desc: "Grey coverage or base color maintenance." },
            { name: "Gloss & Toner", price: "$65+", desc: "Add shine and correct tone between services." },
            { name: "Keratin Treatment", price: "$300+", desc: "Smoothing therapy for frizz-free hair." }
        ];
        const GALLERY_IMAGES = [
            "https://images.unsplash.com/photo-1562322140-8baeececf3df?auto=format&fit=crop&q=80&w=800",
            "https://images.unsplash.com/photo-1560869713-7d0a29430803?auto=format&fit=crop&q=80&w=800",
            "https://images.unsplash.com/photo-1522337360788-8b13dee7a37e?auto=format&fit=crop&q=80&w=800",
            "https://images.unsplash.com/photo-1595476108010-b4d1f102b1b1?auto=format&fit=crop&q=80&w=800",
            "https://images.unsplash.com/photo-1519699047748-de8e457a634e?auto=format&fit=crop&q=80&w=800",
            "https://images.unsplash.com/photo-1521590832169-d7b1aa1321d6?auto=format&fit=crop&q=80&w=800"
        ];

        // --- CLOUD LOGIC ---
        const fetchCloudData = async () => {
            try {
                const response = await fetch(`${CLOUD_CONFIG.API_URL}/${CLOUD_CONFIG.BIN_ID}/latest`);
                const data = await response.json();
                return data.record;
            } catch (error) {
                console.error("Cloud fetch failed", error);
                return null;
            }
        };

        const saveToCloud = async (apiKey, data) => {
            try {
                const response = await fetch(`${CLOUD_CONFIG.API_URL}/${CLOUD_CONFIG.BIN_ID}`, {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json', 'X-Master-Key': apiKey },
                    body: JSON.stringify(data)
                });
                return response.ok;
            } catch (error) {
                console.error("Save failed", error);
                return false;
            }
        };

        // --- COMPONENTS ---
        const Navbar = () => {
            const [scrolled, setScrolled] = useState(false);
            const [mobileMenuOpen, setMobileMenuOpen] = useState(false);
            useEffect(() => {
                const handleScroll = () => setScrolled(window.scrollY > 50);
                window.addEventListener('scroll', handleScroll);
                return () => window.removeEventListener('scroll', handleScroll);
            }, []);
            return (
                <nav className={`fixed w-full z-50 transition-all duration-300 ${scrolled ? 'bg-white shadow-md py-3' : 'bg-transparent py-5'}`}>
                    <div className="max-w-7xl mx-auto px-6 flex justify-between items-center">
                        <div className={`font-serif text-2xl font-bold tracking-widest ${scrolled ? 'text-gray-900' : 'text-white'}`}>da Linda</div>
                        <div className="hidden md:flex space-x-8">
                            {['Home', 'Services', 'Gallery', 'Book Now'].map((link) => (
                                <a key={link} href={`#${link === 'Home' ? 'hero' : link === 'Book Now' ? 'booking' : link.toLowerCase()}`} className={`text-sm tracking-wider hover:opacity-75 transition-colors ${scrolled ? 'text-gray-800' : 'text-white'}`}>{link.toUpperCase()}</a>
                            ))}
                        </div>
                        <button className={`md:hidden ${scrolled ? 'text-gray-900' : 'text-white'}`} onClick={() => setMobileMenuOpen(true)}><Icons.Menu /></button>
                    </div>
                    {mobileMenuOpen && (
                        <div className="fixed inset-0 bg-white z-50 flex flex-col items-center justify-center space-y-8 animate-fade-in">
                            <button className="absolute top-6 right-6 text-gray-800" onClick={() => setMobileMenuOpen(false)}><Icons.X /></button>
                            {['Home', 'Services', 'Gallery', 'Book Now'].map((link) => (
                                <a key={link} href={`#${link === 'Home' ? 'hero' : link === 'Book Now' ? 'booking' : link.toLowerCase()}`} className="text-2xl font-serif text-gray-900" onClick={() => setMobileMenuOpen(false)}>{link}</a>
                            ))}
                        </div>
                    )}
                </nav>
            );
        };

        const Hero = ({ isAdmin, heroText, setHeroText }) => (
            <section id="hero" className="relative h-screen w-full flex items-center justify-center overflow-hidden group">
                <div className="absolute inset-0 z-0">
                    <img src="https://images.unsplash.com/photo-1633681926022-84c23e8cb2d6?auto=format&fit=crop&q=80&w=2000" alt="Salon Interior" className="w-full h-full object-cover"/>
                    <div className="absolute inset-0 bg-black/40"></div>
                </div>
                <div className="relative z-10 text-center text-white px-4">
                    {isAdmin ? (
                        <div className="flex flex-col gap-4">
                            <input value={heroText.subtitle} onChange={(e) => setHeroText({...heroText, subtitle: e.target.value})} className="admin-input text-center text-black uppercase tracking-widest"/>
                            <input value={heroText.title} onChange={(e) => setHeroText({...heroText, title: e.target.value})} className="admin-input text-center text-black text-4xl font-serif"/>
                            <input value={heroText.tagline} onChange={(e) => setHeroText({...heroText, tagline: e.target.value})} className="admin-input text-center text-black italic"/>
                        </div>
                    ) : (
                        <>
                            <h2 className="text-sm md:text-base uppercase tracking-[0.3em] mb-4 opacity-90">{heroText.subtitle || "Welcome to"}</h2>
                            <h1 className="text-6xl md:text-8xl font-serif mb-6">{heroText.title || "da Linda"}</h1>
                            <p className="text-lg md:text-xl font-light italic opacity-90 mb-10">{heroText.tagline}</p>
                        </>
                    )}
                    <a href="#services" className="inline-block border border-white px-8 py-3 text-sm tracking-widest hover:bg-white hover:text-black transition-all duration-300 mt-8">EXPLORE SERVICES</a>
                </div>
            </section>
        );

        const Services = ({ isAdmin, services, setServices }) => {
            const update = (i, f, v) => {
                const n = [...services];
                n[i][f] = v;
                setServices(n);
            };
            return (
                <section id="services" className="py-20 bg-white">
                    <div className="max-w-4xl mx-auto px-6">
                        <div className="text-center mb-16"><h2 className="text-4xl font-serif text-gray-900 mb-4">Our Menu</h2><div className="w-16 h-0.5 bg-[#D4AF37] mx-auto"></div></div>
                        <div className="grid gap-8">
                            {(services || DEFAULT_SERVICES).map((s, i) => (
                                <div key={i} className="flex flex-col md:flex-row justify-between border-b border-gray-100 pb-4">
                                    <div className="md:w-2/3">
                                        {isAdmin ? <input value={s.name} onChange={(e)=>update(i,'name',e.target.value)} className="admin-input font-serif text-xl mb-1"/> : <h3 className="text-xl font-serif text-gray-900">{s.name}</h3>}
                                        {isAdmin ? <input value={s.desc} onChange={(e)=>update(i,'desc',e.target.value)} className="admin-input text-sm"/> : <p className="text-gray-500 text-sm mt-1">{s.desc}</p>}
                                    </div>
                                    <div className="mt-2 md:mt-0">
                                        {isAdmin ? <input value={s.price} onChange={(e)=>update(i,'price',e.target.value)} className="admin-input font-bold text-right"/> : <span className="text-lg font-bold text-gray-800">{s.price}</span>}
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                </section>
            );
        };

        const Gallery = ({ isAdmin, images, setImages }) => {
            const handleImageChange = (index) => {
                const url = prompt("Enter new image URL:");
                if (url) {
                    const newImages = [...images];
                    newImages[index] = url;
                    setImages(newImages);
                }
            };
            return (
                <section id="gallery" className="py-20 bg-[#f9f9f7]">
                    <div className="max-w-7xl mx-auto px-6">
                        <div className="text-center mb-12">
                            <h2 className="text-4xl font-serif text-gray-900 mb-4">Portfolio</h2>
                            {isAdmin && <p className="text-[#D4AF37] text-xs uppercase font-bold">Admin: Click image to change URL</p>}
                        </div>
                        <div className="grid grid-cols-2 md:grid-cols-3 gap-4">
                            {(images || GALLERY_IMAGES).map((src, i) => (
                                <div key={i} className="relative aspect-[3/4] overflow-hidden rounded-lg group cursor-pointer" onClick={() => isAdmin && handleImageChange(i)}>
                                    <img src={src} className="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110" loading="lazy"/>
                                </div>
                            ))}
                        </div>
                    </div>
                </section>
            );
        };

        const BookingSystem = ({ contactInfo }) => (
            <section id="booking" className="py-20 bg-white text-center">
                <h2 className="text-4xl font-serif mb-8">Book an Appointment</h2>
                <p className="mb-8 text-gray-600">We recommend booking 2 weeks in advance.</p>
<div className="flex flex-col md:flex-row justify-center gap-4">
                    <a href={`tel:${contactInfo.phone}`} className="bg-black text-white px-8 py-3 uppercase tracking-widest hover:bg-[#D4AF37]">Call to Book</a>
                    <a href={`sms:${contactInfo.phone}`} className="border border-black px-8 py-3 uppercase tracking-widest hover:bg-black hover:text-white">Text to Book</a>
                </div>
            </section>
        );

        const ActionButtons = ({ contactInfo }) => (
            <div className="fixed bottom-4 right-4 z-40 flex flex-col gap-2">
                <a href={`tel:${contactInfo.phone}`} className="bg-white p-3 rounded-full shadow-lg text-black hover:text-[#D4AF37]"><Icons.Phone /></a>
                <a href={`sms:${contactInfo.phone}`} className="bg-white p-3 rounded-full shadow-lg text-black hover:text-[#D4AF37]"><Icons.Message /></a>
            </div>
        );

        const Footer = ({ onLogin, isAdmin, isSaving, onSave }) => (
            <footer className="bg-gray-900 text-white py-12 text-center">
                <h2 className="font-serif text-3xl mb-6">da Linda</h2>
                <div className="flex justify-center gap-4 mb-8">
                    <button onClick={onLogin} className="text-xs uppercase tracking-widest border px-3 py-1 rounded hover:bg-white hover:text-black">{isAdmin ? "Log Out" : "Admin Login"}</button>
                    {isAdmin && (
                        <button onClick={onSave} disabled={isSaving} className="text-xs uppercase tracking-widest bg-[#D4AF37] text-black px-4 py-1 rounded font-bold hover:bg-white flex items-center gap-2">{isSaving ? "Publishing..." : <>Publish Changes <Icons.Cloud/></>}</button>
                    )}
                </div>
                <p className="text-gray-600 text-xs">© 2026 da Linda Salon</p>
            </footer>
        );

        const App = () => {
            const [isAdmin, setIsAdmin] = useState(false);
            const [isSaving, setIsSaving] = useState(false);
            const [apiKey, setApiKey] = useState("");
            
            // App Content State
            const [heroText, setHeroText] = useState({});
            const [services, setServices] = useState(DEFAULT_SERVICES);
            const [images, setImages] = useState(GALLERY_IMAGES);
            const [contactInfo, setContactInfo] = useState({ phone: '+17278779909', email: 'lpiranaj@gmail.com' });

            useEffect(() => {
                const load = async () => {
                    const cloudData = await fetchCloudData();
                    if (cloudData) {
                        if (cloudData.hero) setHeroText(cloudData.hero);
                        if (cloudData.services) setServices(cloudData.services);
                        if (cloudData.gallery) setImages(cloudData.gallery);
                        if (cloudData.contact) setContactInfo(cloudData.contact);
                        
                        // Local Backup
                        localStorage.setItem('dalinda_hero_text', JSON.stringify(cloudData.hero));
                        localStorage.setItem('dalinda_services', JSON.stringify(cloudData.services));
                        localStorage.setItem('dalinda_gallery_imgs', JSON.stringify(cloudData.gallery));
                        localStorage.setItem('dalinda_contact', JSON.stringify(cloudData.contact));
                    }
                };
                load();
            }, []);

            const handleSave = async () => {
                if (!apiKey) return alert("Error: No API Key found. Relogin.");
                setIsSaving(true);
                
                const payload = { hero: heroText, services, gallery: images, contact: contactInfo };
                
                // Save locally first
                localStorage.setItem('dalinda_hero_text', JSON.stringify(heroText));
                localStorage.setItem('dalinda_services', JSON.stringify(services));
                localStorage.setItem('dalinda_gallery_imgs', JSON.stringify(images));
                localStorage.setItem('dalinda_contact', JSON.stringify(contactInfo));

                const success = await saveToCloud(apiKey, payload);
                if (success) alert("✅ Live site updated successfully!");
                else alert("❌ Update failed. Check internet connection.");
                setIsSaving(false);
            };

            const handleLogin = () => {
                if (isAdmin) {
                    setIsAdmin(false);
                    setApiKey("");
                } else {
                    const key = prompt("Enter your JSONBin Master Key to edit:");
                    if (key && key.length > 10) {
                        setApiKey(key);
                        setIsAdmin(true);
                    } else if (key) {
                        alert("Invalid Key");
                    }
                }
            };

            return (
                <div className="min-h-screen relative bg-[#f9f9f7] text-[#1a1a1a]">
                    {isAdmin && <div className="fixed top-0 w-full bg-[#D4AF37] text-black text-center text-xs font-bold py-1 z-[60]">ADMIN MODE: Click 'Publish Changes' in Footer to save to live site.</div>}
                    <Navbar />
                    <Hero isAdmin={isAdmin} heroText={heroText} setHeroText={setHeroText} />
                    <Services isAdmin={isAdmin} services={services} setServices={setServices} />
                    <Gallery isAdmin={isAdmin} images={images} setImages={setImages} />
                    <BookingSystem contactInfo={contactInfo} />
                    <ActionButtons contactInfo={contactInfo} />
                    <Footer onLogin={handleLogin} isAdmin={isAdmin} isSaving={isSaving} onSave={handleSave} />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>